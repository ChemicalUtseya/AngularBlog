var app=angular.module("app",["ngAnimate","ui.router","ngSanitize"]);app.run(["$rootScope","$state","$stateParams",function(a,b,c){a.$state=b,a.$stateParams=c}]),app.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"pages/home.html",controller:"mainController"}).state("about",{url:"/about",templateUrl:"pages/page.html",controller:"aboutController"}).state("contact",{url:"/contact",templateUrl:"pages/contact.html",controller:"contactController"}).state("post",{url:"/post/{id}/{slug}",templateUrl:"pages/post.html",controller:"postController"}).state("pager",{url:"/page/{id}",templateUrl:"pages/home.html",controller:"mainController"}),c.html5Mode(!0)}]),app.directive("postsPagination",function(){return{restrict:"E",template:'<ul class="pager" ng-show="pager"><li class="previous" ng-show="currentPage != 1"><a ui-sref="pager({id:currentPage-1})">&larr; Newer Posts</a></li><li class="next" ng-show="currentPage != totalPages"><a ui-sref="pager({id:currentPage+1})">Older Posts &rarr;</a></li></ul>'}}),app.filter("limitHtml",function(){return function(a,b){var c=String(a).replace(/<[^>]+>/gm,"");c.length;return c.length>b?c.substr(0,b-1)+"...":c}}),app.filter("currentYear",["$filter",function(a){return function(){return a("date")(new Date,"yyyy")}}]),app.controller("mainController",["$scope","$http","$sce","$timeout","$stateParams",function(a,b,c,d,e){a.page_title="Clean Blog",a.page_subtitle="A Clean Blog Theme by Start Bootstrap",a.date=new Date,a.posts=[],a.totalPages=0,a.currentPage=1,a.range=[],a.loading=!1,a.pager=!1,a.dateFormat=function(a){if(a){var b=a.split(" ").join("T");return new Date(b)}return null},a.getPosts=function(c){c=e.id,void 0===c&&(c="1"),a.loading=!0,b.get("json/posts-page-"+c+".json").success(function(b){a.posts=b.data,a.totalPages=b.last_page,a.currentPage=b.current_page,a.loading=!1,a.pager=!0,c>a.totalPages&&(a.noResult=!0,a.loading=!1,a.pager=!1)})},a.getPosts()}]),app.controller("postController",["$scope","$http","$state","$stateParams",function(a,b,c,d){a.page_title="About Me",void 0==d.id&&c.go("home"),a.dateFormat=function(a){if(a){var b=a.split(" ").join("T");return new Date(b)}return null},post_id=d.id,b.get("json/post.json").success(function(b){a.post_id=b.id,a.post_date=b.post_date,a.post_title=b.post_title,a.post_author=b.author.firstname+" "+b.author.lastname,a.post_content=b.post_content})}]),app.controller("aboutController",["$scope","$http",function(a,b){a.page_title="About Me",a.page_subtitle="This is what I do."}]),app.directive("showErrors",["$timeout","showErrorsConfig",function(a,b){var c,d;return c=function(a){var c;return c=b.showSuccess,a&&null!=a.showSuccess&&(c=a.showSuccess),c},d=function(b,d,e,f){var g,h,i,j,k,l,m;if(g=!1,k=b.$eval(e.showErrors),l=c(k),h=d[0].querySelector("[name]"),j=angular.element(h),!(i=j.attr("name")))throw"show-errors element has no child input elements with a 'name' attribute";return j.bind("blur",function(){return g=!0,m(f[i].$invalid)}),b.$watch(function(){return f[i]&&f[i].$invalid},function(a){if(g)return m(a)}),b.$on("show-errors-check-validity",function(){return m(f[i].$invalid)}),b.$on("show-errors-reset",function(){return a(function(){return d.removeClass("has-error"),d.removeClass("has-success"),g=!1},0,!1)}),m=function(a){if(d.toggleClass("has-error",a),l)return d.toggleClass("has-success",!a)}},{restrict:"A",require:"^form",compile:function(a,b){if(!a.hasClass("form-group"))throw"show-errors element does not have the 'form-group' class";return d}}}]),app.provider("showErrorsConfig",function(){var a;a=!1,this.showSuccess=function(b){return a=b},this.$get=function(){return{showSuccess:a}}}),app.config(["showErrorsConfigProvider",function(a){a.showSuccess(!0)}]),app.controller("contactController",["$scope","$http",function(a,b){a.page_title="Contact Me",a.page_subtitle="Have questions? I have answers (maybe).",a.phone_number=/^[0-9]+$/,a.email=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9-]+(\.[a-z0-9-]+)*$/i,a.resultMessage,a.formData,a.loading=!1,a.alert=!1,a.submit=function(c){a.$broadcast("show-errors-check-validity"),a.contactForm.$valid&&(a.loading=!0,b({method:"POST",url:"mail/contact_me.php",data:$.param(a.formData),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(b){b.success?(a.resultMessage=b.message,a.alertClass="alert alert-success"):(a.resultMessage=b.message,a.alertClass="alert alert-danger"),a.loading=!1,a.alert=!0,a.reset()}))},a.reset=function(){a.$broadcast("show-errors-reset"),a.formData={}}}]);